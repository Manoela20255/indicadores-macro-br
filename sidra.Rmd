---
title: "SIDRA — IPCA"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)
dir.create("data", showWarnings = FALSE)
library(dplyr); library(ggplot2); library(lubridate)
```

## IPCA (SIDRA)

```{r sidra-data}
cod_sidra <- "/t/7060/n1/all/v/63/p/all/c315/7169/d/v63%202"
dados_sidra <- tryCatch(sidrar::get_sidra(api = cod_sidra), error = function(e) NULL)
if(!is.null(dados_sidra)){
  df_sidra <- dados_sidra %>% dplyr::mutate(data = lubridate::ym(`Mês (Código)`), ipca = Valor, .keep = "none")
  readr::write_csv(df_sidra, "data/sidra_ipca.csv")
  if(requireNamespace("writexl", quietly = TRUE)) writexl::write_xlsx(df_sidra, "data/sidra_ipca.xlsx")
  knitr::kable(head(df_sidra, 12))
}
```

```{r sidra-plot}
if(exists("df_sidra")){
  ggplot(df_sidra, aes(x = data, y = ipca)) + geom_line() + theme_minimal() + labs(title = "IPCA (SIDRA)")
}
```

Download: [CSV](data/sidra_ipca.csv) | [XLSX](data/sidra_ipca.xlsx)

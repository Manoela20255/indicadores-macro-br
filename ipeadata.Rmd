---
title: "IPEADATA"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)
dir.create("data", showWarnings = FALSE)
library(dplyr); library(tidyr); library(ggplot2)
```

## Séries IPEA

```{r ipeadata}
dados_ipeadata <- tryCatch(ipeadatar::ipeadata(c("caged" = "CAGED12_SALDON12", "embi_br" = "JPM366_EMBI366")), error = function(e) NULL)
if(!is.null(dados_ipeadata)){
  df_ipea <- dados_ipeadata %>% tidyr::pivot_wider(id_cols = "date", names_from = "code", values_from = "value") %>% dplyr::rename(data = date)
  readr::write_csv(df_ipea, "data/ipeadata.csv")
  if(requireNamespace("writexl", quietly = TRUE)) writexl::write_xlsx(df_ipea, "data/ipeadata.xlsx")
  knitr::kable(head(df_ipea, 10))
}
```

```{r ipeadata-plot}
if(exists("df_ipea")){
  df_plot <- df_ipea %>% tidyr::pivot_longer(-data, names_to = "serie", values_to = "valor")
  ggplot(df_plot, aes(x = data, y = valor, color = serie)) + geom_line() + theme_minimal() + labs(title = "Séries IPEA")
}
```

Download: [CSV](data/ipeadata.csv) | [XLSX](data/ipeadata.xlsx)
